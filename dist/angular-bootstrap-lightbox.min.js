/*! angular-bootstrap-lightbox */
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
angular.module("bootstrapLightbox",["ngTouch","ui.bootstrap","chieffancypants.loadingBar"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.nextImage() ng-swipe-right=Lightbox.prevImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer(),d=new Image;return d.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve()},d.onerror=function(){c.reject()},d.src=b,c.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","cfpLoadingBar","ImageLoader",function(a,b,c,d,e){var f=[],g=-1,h={};return h.templateUrl=this.templateUrl,h.calculateImageDimensionLimits=this.calculateImageDimensionLimits,h.calculateModalDimensions=this.calculateModalDimensions,h.keyboardNavEnabled=!1,h.image={},h.openModal=function(a,c){f=a,h.setImage(c),b.open({templateUrl:h.templateUrl,controller:["$scope",function(a){a.Lightbox=h,h.keyboardNavEnabled=!0}],windowClass:"lightbox-modal"}).result.finally(function(){h.image={},h.keyboardNavEnabled=!1,d.complete()})},h.setImage=function(a){if(!(a in f&&"url"in f[a]))throw"Invalid image.";d.start();var b=function(){g=a,h.image=f[g],d.complete()};e.load(f[a].url).then(b,function(){b(),h.image.url="//:0",h.image.caption="Failed to load image"})},h.firstImage=function(){h.setImage(0)},h.prevImage=function(){h.setImage((g-1+f.length)%f.length)},h.nextImage=function(){h.setImage((g+1)%f.length)},h.lastImage=function(){h.setImage(f.length-1)},h.setImages=function(a){f=a,h.setImage(g)},a.bind("keydown",function(a){if(h.keyboardNavEnabled){var b=null;switch(a.which){case 39:b="nextImage";break;case 37:b="prevImage"}null!==b&&-1===["input","textarea"].indexOf(a.target.tagName.toLowerCase())&&(c(function(){h[b]()}),a.preventDefault())}}),h}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){var c=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h||0,height:i||0}},d=0,e=0;return{link:function(f,g,h){var i=function(){var f=a.innerWidth,h=a.innerHeight,i=b.calculateImageDimensionLimits({windowWidth:f,windowHeight:h,imageWidth:d,imageHeight:e}),j=c(angular.extend({width:d,height:e,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},i)),k=b.calculateModalDimensions({windowWidth:f,windowHeight:h,imageDisplayWidth:j.width,imageDisplayHeight:j.height});g.css({width:j.width+"px",height:j.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:k.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:k.height+"px"})};f.$watch(function(){return h.lightboxSrc},function(a){g[0].src="//:0";var b=new Image;b.src=a,d=b.naturalWidth,e=b.naturalHeight,i(),g[0].src=a}),angular.element(a).on("resize",i)}}}]);
=======
angular.module("bootstrapLightbox",["ngTouch","ui.bootstrap","chieffancypants.loadingBar"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.prevImage() ng-swipe-right=Lightbox.nextImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","cfpLoadingBar","ImageLoader",function(a,b,c,d,e){var f=!1,g=[],h=-1,i={};return i.templateUrl=this.templateUrl,i.calculateImageDimensionLimits=this.calculateImageDimensionLimits,i.calculateModalDimensions=this.calculateModalDimensions,i.image={},i.openModal=function(a,c){g=a,i.setImage(c),b.open({templateUrl:i.templateUrl,controller:["$scope",function(a){a.Lightbox=i,f=!0}],windowClass:"lightbox-modal"}).result.finally(function(){i.image={},d.complete(),f=!1})},i.setImage=function(a){if(!(a in g&&"url"in g[a]))throw"Invalid image.";d.start();var b=function(){h=a,i.image=g[h],d.complete()};e.load(g[a].url).then(b,function(){b(),i.image.url="//:0",i.image.caption="Failed to load image"})},i.firstImage=function(){i.setImage(0)},i.prevImage=function(){i.setImage((h-1+g.length)%g.length)},i.nextImage=function(){i.setImage((h+1)%g.length)},i.lastImage=function(){i.setImage(g.length-1)},i.setImages=function(a){g=a,i.setImage(h)},a.bind("keydown",function(a){if(f)switch(a.which){case 39:return c(function(){i.nextImage()}),!1;case 37:return c(function(){i.prevImage()}),!1}}),i}]}),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer();return image=new Image,image.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve()},image.onerror=function(){c.reject()},image.src=b,c.promise}}]),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){var c=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h||0,height:i||0}},d=0,e=0;return{link:function(f,g,h){var i=function(){var f=a.innerWidth,h=a.innerHeight,i=b.calculateImageDimensionLimits({windowWidth:f,windowHeight:h,imageWidth:d,imageHeight:e}),j=c(angular.extend({width:d,height:e,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},i)),k=b.calculateModalDimensions({windowWidth:f,windowHeight:h,imageDisplayWidth:j.width,imageDisplayHeight:j.height});g.css({width:j.width+"px",height:j.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:k.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:k.height+"px"})};f.$watch(function(){return h.lightboxSrc},function(a){g[0].src="//:0";var b=new Image;b.src=a,d=b.naturalWidth,e=b.naturalHeight,i(),g[0].src=a}),angular.element(a).on("resize",i)}}}]);
>>>>>>> fb9d488... set the lightbox image only after it has loaded, and handle load errors; add ImageLoader service; un-require the width and height properties
=======
angular.module("bootstrapLightbox",["ngTouch","ui.bootstrap","chieffancypants.loadingBar"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.prevImage() ng-swipe-right=Lightbox.nextImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer();return image=new Image,image.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve()},image.onerror=function(){c.reject()},image.src=b,c.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","cfpLoadingBar","ImageLoader",function(a,b,c,d,e){var f=!1,g=[],h=-1,i={};return i.templateUrl=this.templateUrl,i.calculateImageDimensionLimits=this.calculateImageDimensionLimits,i.calculateModalDimensions=this.calculateModalDimensions,i.image={},i.openModal=function(a,c){g=a,i.setImage(c),b.open({templateUrl:i.templateUrl,controller:["$scope",function(a){a.Lightbox=i,f=!0}],windowClass:"lightbox-modal"}).result.finally(function(){i.image={},d.complete(),f=!1})},i.setImage=function(a){if(!(a in g&&"url"in g[a]))throw"Invalid image.";d.start();var b=function(){h=a,i.image=g[h],d.complete()};e.load(g[a].url).then(b,function(){b(),i.image.url="//:0",i.image.caption="Failed to load image"})},i.firstImage=function(){i.setImage(0)},i.prevImage=function(){i.setImage((h-1+g.length)%g.length)},i.nextImage=function(){i.setImage((h+1)%g.length)},i.lastImage=function(){i.setImage(g.length-1)},i.setImages=function(a){g=a,i.setImage(h)},a.bind("keydown",function(a){if(f)switch(a.which){case 39:return c(function(){i.nextImage()}),!1;case 37:return c(function(){i.prevImage()}),!1}}),i}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){calculateImageDisplayDimensions=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h||0,height:i||0}};var c=0,d=0;return{link:function(e,f,g){var h=function(){var e=a.innerWidth,g=a.innerHeight,h=b.calculateImageDimensionLimits({windowWidth:e,windowHeight:g,imageWidth:c,imageHeight:d}),i=calculateImageDisplayDimensions(angular.extend({width:c,height:d,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},h)),j=b.calculateModalDimensions({windowWidth:e,windowHeight:g,imageDisplayWidth:i.width,imageDisplayHeight:i.height});f.css({width:i.width+"px",height:i.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:j.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:j.height+"px"})};e.$watch(function(){return g.lightboxSrc},function(a){f[0].src="//:0";var b=new Image;b.src=a,c=b.naturalWidth,d=b.naturalHeight,h(),f[0].src=a}),angular.element(a).on("resize",h)}}}]);
>>>>>>> e52d470... rename src files to be more descriptive
=======
angular.module("bootstrapLightbox",["ngTouch","ui.bootstrap","chieffancypants.loadingBar"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.prevImage() ng-swipe-right=Lightbox.nextImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer(),d=new Image;return d.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve()},d.onerror=function(){c.reject()},d.src=b,c.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","cfpLoadingBar","ImageLoader",function(a,b,c,d,e){var f=!1,g=[],h=-1,i={};return i.templateUrl=this.templateUrl,i.calculateImageDimensionLimits=this.calculateImageDimensionLimits,i.calculateModalDimensions=this.calculateModalDimensions,i.image={},i.openModal=function(a,c){g=a,i.setImage(c),b.open({templateUrl:i.templateUrl,controller:["$scope",function(a){a.Lightbox=i,f=!0}],windowClass:"lightbox-modal"}).result.finally(function(){i.image={},d.complete(),f=!1})},i.setImage=function(a){if(!(a in g&&"url"in g[a]))throw"Invalid image.";d.start();var b=function(){h=a,i.image=g[h],d.complete()};e.load(g[a].url).then(b,function(){b(),i.image.url="//:0",i.image.caption="Failed to load image"})},i.firstImage=function(){i.setImage(0)},i.prevImage=function(){i.setImage((h-1+g.length)%g.length)},i.nextImage=function(){i.setImage((h+1)%g.length)},i.lastImage=function(){i.setImage(g.length-1)},i.setImages=function(a){g=a,i.setImage(h)},a.bind("keydown",function(a){if(f)switch(a.which){case 39:return c(function(){i.nextImage()}),!1;case 37:return c(function(){i.prevImage()}),!1}}),i}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){var c=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h||0,height:i||0}},d=0,e=0;return{link:function(f,g,h){var i=function(){var f=a.innerWidth,h=a.innerHeight,i=b.calculateImageDimensionLimits({windowWidth:f,windowHeight:h,imageWidth:d,imageHeight:e}),j=c(angular.extend({width:d,height:e,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},i)),k=b.calculateModalDimensions({windowWidth:f,windowHeight:h,imageDisplayWidth:j.width,imageDisplayHeight:j.height});g.css({width:j.width+"px",height:j.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:k.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:k.height+"px"})};f.$watch(function(){return h.lightboxSrc},function(a){g[0].src="//:0";var b=new Image;b.src=a,d=b.naturalWidth,e=b.naturalHeight,i(),g[0].src=a}),angular.element(a).on("resize",i)}}}]);
>>>>>>> a2cf388... jshint
=======
angular.module("bootstrapLightbox",["ngTouch","ui.bootstrap","chieffancypants.loadingBar"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.prevImage() ng-swipe-right=Lightbox.nextImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer(),d=new Image;return d.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve()},d.onerror=function(){c.reject()},d.src=b,c.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","cfpLoadingBar","ImageLoader",function(a,b,c,d,e){var f=[],g=-1,h={};return h.templateUrl=this.templateUrl,h.calculateImageDimensionLimits=this.calculateImageDimensionLimits,h.calculateModalDimensions=this.calculateModalDimensions,h.keyboardNavEnabled=!1,h.image={},h.openModal=function(a,c){f=a,h.setImage(c),b.open({templateUrl:h.templateUrl,controller:["$scope",function(a){a.Lightbox=h,h.keyboardNavEnabled=!0}],windowClass:"lightbox-modal"}).result.finally(function(){h.image={},h.keyboardNavEnabled=!1,d.complete()})},h.setImage=function(a){if(!(a in f&&"url"in f[a]))throw"Invalid image.";d.start();var b=function(){g=a,h.image=f[g],d.complete()};e.load(f[a].url).then(b,function(){b(),h.image.url="//:0",h.image.caption="Failed to load image"})},h.firstImage=function(){h.setImage(0)},h.prevImage=function(){h.setImage((g-1+f.length)%f.length)},h.nextImage=function(){h.setImage((g+1)%f.length)},h.lastImage=function(){h.setImage(f.length-1)},h.setImages=function(a){f=a,h.setImage(g)},a.bind("keydown",function(a){if(h.keyboardNavEnabled){var b=null;switch(a.which){case 39:b="nextImage";break;case 37:b="prevImage"}null!==b&&-1===["input","textarea"].indexOf(a.tagName)&&(c(function(){h[b]()}),a.preventDefault())}}),h}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){var c=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h||0,height:i||0}},d=0,e=0;return{link:function(f,g,h){var i=function(){var f=a.innerWidth,h=a.innerHeight,i=b.calculateImageDimensionLimits({windowWidth:f,windowHeight:h,imageWidth:d,imageHeight:e}),j=c(angular.extend({width:d,height:e,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},i)),k=b.calculateModalDimensions({windowWidth:f,windowHeight:h,imageDisplayWidth:j.width,imageDisplayHeight:j.height});g.css({width:j.width+"px",height:j.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:k.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:k.height+"px"})};f.$watch(function(){return h.lightboxSrc},function(a){g[0].src="//:0";var b=new Image;b.src=a,d=b.naturalWidth,e=b.naturalHeight,i(),g[0].src=a}),angular.element(a).on("resize",i)}}}]);
>>>>>>> a3b944a... add Lightbox.keyboardNavEnabled flag; disable keyboard navigation when the target is an input or a textarea
=======
angular.module("bootstrapLightbox",["ngTouch","ui.bootstrap","chieffancypants.loadingBar"]),angular.module("bootstrapLightbox").run(["$templateCache",function(a){"use strict";a.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.nextImage() ng-swipe-right=Lightbox.prevImage()><div class=lightbox-nav><button class=close aria-hidden=true ng-click=$dismiss()>×</button><div class=btn-group><a class="btn btn-xs btn-default" ng-click=Lightbox.prevImage()>‹ Previous</a> <a ng-href={{Lightbox.image.url}} target=_blank class="btn btn-xs btn-default" title="Open in new tab">Open image in new tab</a> <a class="btn btn-xs btn-default" ng-click=Lightbox.nextImage()>Next ›</a></div></div><div class=lightbox-image-container><div class=lightbox-image-caption><span>{{Lightbox.image.caption}}</span></div><img lightbox-src={{Lightbox.image.url}} alt=""></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(a){this.load=function(b){var c=a.defer(),d=new Image;return d.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&c.reject(),c.resolve()},d.onerror=function(){c.reject()},d.src=b,c.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.calculateImageDimensionLimits=function(a){return{maxWidth:a.windowWidth-102,maxHeight:a.windowHeight-136}},this.calculateModalDimensions=function(a){var b=Math.max(400,a.imageDisplayWidth+42),c=Math.max(200,a.imageDisplayHeight+76);return(b>=a.windowWidth-20||a.windowWidth<768)&&(b="auto"),c>=a.windowHeight&&(c="auto"),{width:b,height:c}},this.$get=["$document","$modal","$timeout","cfpLoadingBar","ImageLoader",function(a,b,c,d,e){var f=[],g=-1,h={};return h.templateUrl=this.templateUrl,h.calculateImageDimensionLimits=this.calculateImageDimensionLimits,h.calculateModalDimensions=this.calculateModalDimensions,h.keyboardNavEnabled=!1,h.image={},h.openModal=function(a,c){f=a,h.setImage(c),b.open({templateUrl:h.templateUrl,controller:["$scope",function(a){a.Lightbox=h,h.keyboardNavEnabled=!0}],windowClass:"lightbox-modal"}).result.finally(function(){h.image={},h.keyboardNavEnabled=!1,d.complete()})},h.setImage=function(a){if(!(a in f&&"url"in f[a]))throw"Invalid image.";d.start();var b=function(){g=a,h.image=f[g],d.complete()};e.load(f[a].url).then(b,function(){b(),h.image.url="//:0",h.image.caption="Failed to load image"})},h.firstImage=function(){h.setImage(0)},h.prevImage=function(){h.setImage((g-1+f.length)%f.length)},h.nextImage=function(){h.setImage((g+1)%f.length)},h.lastImage=function(){h.setImage(f.length-1)},h.setImages=function(a){f=a,h.setImage(g)},a.bind("keydown",function(a){if(h.keyboardNavEnabled){var b=null;switch(a.which){case 39:b="nextImage";break;case 37:b="prevImage"}null!==b&&-1===["input","textarea"].indexOf(a.tagName)&&(c(function(){h[b]()}),a.preventDefault())}}),h}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","Lightbox",function(a,b){var c=function(a){var b=a.width,c=a.height,d=a.minWidth,e=a.minHeight,f=a.maxWidth,g=a.maxHeight,h=b,i=c;return d>b&&e>c?b/c>f/g?(i=e,h=Math.round(b*e/c)):(h=d,i=Math.round(c*d/b)):d>b?(h=d,i=Math.round(c*d/b)):e>c&&(i=e,h=Math.round(b*e/c)),b>f&&c>g?b/c>f/g?(h=f,i=Math.round(c*f/b)):(i=g,h=Math.round(b*g/c)):b>f?(h=f,i=Math.round(c*f/b)):c>g&&(i=g,h=Math.round(b*g/c)),{width:h||0,height:i||0}},d=0,e=0;return{link:function(f,g,h){var i=function(){var f=a.innerWidth,h=a.innerHeight,i=b.calculateImageDimensionLimits({windowWidth:f,windowHeight:h,imageWidth:d,imageHeight:e}),j=c(angular.extend({width:d,height:e,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},i)),k=b.calculateModalDimensions({windowWidth:f,windowHeight:h,imageDisplayWidth:j.width,imageDisplayHeight:j.height});g.css({width:j.width+"px",height:j.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:k.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:k.height+"px"})};f.$watch(function(){return h.lightboxSrc},function(a){g[0].src="//:0";var b=new Image;b.src=a,d=b.naturalWidth,e=b.naturalHeight,i(),g[0].src=a}),angular.element(a).on("resize",i)}}}]);
>>>>>>> 04e6960... fix swiping direction
